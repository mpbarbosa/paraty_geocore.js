repos:
  # Detect accidentally committed private keys / certificates
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: detect-private-key

  # Enforce EditorConfig rules (indentation, line endings, charset)
  - repo: https://github.com/editorconfig-checker/editorconfig-checker.python
    rev: 3.0.3
    hooks:
      - id: editorconfig-checker
        exclude: |
          (?x)^(
            node_modules/|
            \.ai_workflow/
          )

  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.43.0
    hooks:
      - id: markdownlint-fix  # auto-fixes MD007/MD009/MD026/MD047 before commit
        args: [--config, .markdownlint.json]
        exclude: |
          (?x)^(
            node_modules/|
            \.ai_workflow/
          )

  # TypeScript type-check â€” catches type errors before they reach CI
  - repo: local
    hooks:
      - id: typecheck
        name: TypeScript type-check
        entry: npm run validate
        language: system
        files: \.(ts|tsx|json)$  # re-run on source or tsconfig changes
        pass_filenames: false

      - id: eslint
        name: ESLint (TypeScript complexity + style)
        entry: npm run lint
        language: system
        files: \.ts$
        pass_filenames: false

      - id: test-core
        name: Core unit tests
        entry: npm run test:core
        language: system
        files: ^(src/|test/(core|index))  # only re-run when source or core tests change
        pass_filenames: false
